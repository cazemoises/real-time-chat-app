{"ast":null,"code":"var _jsxFileName = \"/home/caze/Documentos/projetos/real-time-chat-app/frontend/src/pages/chat/index.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport \"./styles.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const socketRef = useRef(null);\n  const messageContainerRef = useRef(null);\n  useEffect(() => {\n    socketRef.current = new WebSocket(\"ws://localhost:8081\");\n    socketRef.current.onopen = () => {\n      console.log('Connected to MQ WebSocket server');\n    };\n    socketRef.current.onmessage = event => {\n      console.log('Message received from MQ:', event.data);\n      setMessages(prev => [...prev, event.data]);\n    };\n    socketRef.current.onerror = error => {\n      console.error('MQ WebSocket error:', error);\n    };\n    socketRef.current.onclose = () => {\n      console.log('MQ WebSocket connection closed');\n    };\n    return () => {\n      var _socketRef$current;\n      (_socketRef$current = socketRef.current) === null || _socketRef$current === void 0 ? void 0 : _socketRef$current.close();\n    };\n  }, []);\n  useEffect(() => {\n    axios.get(\"http://localhost:3001/api/messages\", {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => {\n      setMessages(response.data.map(msg => msg.content));\n    }).catch(error => {\n      console.error(\"Error fetching messages:\", error);\n    });\n    console.log(messages);\n  }, []);\n  useEffect(() => {\n    if (messageContainerRef.current) {\n      messageContainerRef.current.scrollTop = messageContainerRef.current.scrollHeight;\n    }\n  }, [messages]);\n  const sendMessage = () => {\n    if (input.trim()) {\n      axios.post(\"http://localhost:3001/api/messages\", {\n        message: input,\n        sender_id: 1,\n        receiver_id: 2\n      });\n      setInput(\"\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages\",\n      ref: messageContainerRef,\n      children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message ${index % 2 === 0 ? 'received' : 'sent'}`,\n        children: msg\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: input,\n        onChange: e => setInput(e.target.value),\n        placeholder: \"Type a message...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendMessage,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"HfHLQFgLFYE2wHULoZ30FKMm+fY=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsxDEV","_jsxDEV","App","_s","messages","setMessages","input","setInput","socketRef","messageContainerRef","current","WebSocket","onopen","console","log","onmessage","event","data","prev","onerror","error","onclose","_socketRef$current","close","get","headers","then","response","map","msg","content","catch","scrollTop","scrollHeight","sendMessage","trim","post","message","sender_id","receiver_id","className","children","ref","index","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","placeholder","onClick","_c","$RefreshReg$"],"sources":["/home/caze/Documentos/projetos/real-time-chat-app/frontend/src/pages/chat/index.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport \"./styles.css\"\n\nconst App: React.FC = () => {\n  const [messages, setMessages] = useState<string[]>([]);\n  const [input, setInput] = useState(\"\");\n  const socketRef = useRef<WebSocket | null>(null);\n  const messageContainerRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    socketRef.current = new WebSocket(\"ws://localhost:8081\");\n  \n    socketRef.current.onopen = () => {\n      console.log('Connected to MQ WebSocket server');\n    };\n  \n    socketRef.current.onmessage = (event) => {\n      console.log('Message received from MQ:', event.data);\n      setMessages((prev) => [...prev, event.data]);\n    };\n  \n    socketRef.current.onerror = (error) => {\n      console.error('MQ WebSocket error:', error);\n    };\n  \n    socketRef.current.onclose = () => {\n      console.log('MQ WebSocket connection closed');\n    };\n  \n    return () => {\n      socketRef.current?.close();\n    };\n  }, []);\n  \n\n  useEffect(() => {\n    axios\n      .get(\"http://localhost:3001/api/messages\", {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n\n      })\n      .then((response) => {\n        setMessages(response.data.map((msg: any) => msg.content));\n      })\n      .catch((error) => {\n        console.error(\"Error fetching messages:\", error);\n      });\n\n      console.log(messages)\n  }, []);\n\n  useEffect(() => {\n    if (messageContainerRef.current) {\n      messageContainerRef.current.scrollTop = messageContainerRef.current.scrollHeight;\n    }\n  }, [messages]);  \n\n  const sendMessage = () => {\n    if (input.trim()) {\n      axios.post(\"http://localhost:3001/api/messages\", {\n        message: input,\n        sender_id: 1,\n        receiver_id: 2,\n      });\n      setInput(\"\");\n    }\n  };\n\n  return (\n    <div className=\"chat-container\">\n      <div className=\"messages\" ref={messageContainerRef}>\n        {messages.map((msg, index) => (\n          <div key={index} className={`message ${index % 2 === 0 ? 'received' : 'sent'}`}>{msg}</div>\n        ))}\n      </div>\n      <div className=\"input-container\">\n        <input\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          placeholder=\"Type a message...\"\n        />\n        <button onClick={sendMessage}>Send</button>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}